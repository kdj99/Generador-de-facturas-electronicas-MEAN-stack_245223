<html ng-app="myApp">
<head>
	<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
	<title>Facturacion electronica</title>
</head>
<body ng-controller="efacturaCtrl">
	<h1>Menu de sistema</h1>
	<nav class="navbar navbar-default">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">e-factura</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li><button class="btn btn-primary" ng-click="moduloclientes=true">Modulo de manejo de clientes</button></li>
        <li><button class="btn btn-success" ng-click="moduloclientes=false">Modulo para expedir una factura electronica</button></li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

<div ng-show="moduloclientes==true" class="container">
<h1>Modulo de manejo de clientes</h1>
<h3 align="center">Ingreso de cliente al sistema</h3>
<form class="navbar-form navbar-center" name="forma_cliente">
        <input name="nombre" type="text"  class="form-control" placeholder="ingresa el nombre del cliente" ng-model="cliente.nombre" required ng-trim="false">
        <input name="direccion" type="text" class="form-control" placeholder="ingresa el domicilio del cliente" ng-model="cliente.direccion" required ng-trim="false">
        <input name="telefono" id="inputTelefono" type="number" class="form-control" placeholder="ingresa el numero de telefono del cliente" ng-model="cliente.telefono" ng-pattern="regex.telefono" required ng-trim="false" onkeypress="return soloNumeros(event);">
        <input name="email" type="email" class="form-control" placeholder="ingresa el email del cliente" ng-model="cliente.email" ng-pattern="regex.email" required ng-trim="false">
        <input name="rfc" type="text" class="form-control" placeholder="RFC del cliente" ng-model="cliente.rfc" ng-pattern="regex.rfc" required ng-trim="false" style="text-transform:uppercase">
        <input type="button" class="btn btn-success" value="Ingresar cliente" ng-disabled="!forma_cliente.$valid||botonactualizar==true" ng-click="addCliente()">
        <button class="btn btn-info" ng-click="actualizar()" ng-disabled="botonactualizar==false">Actualizar Cliente</button>&nbsp;&nbsp;
</form>
</br>
&nbsp;&nbsp;
<!--Alertas de validacion para ingresar un cliente-->
<div class="container">
<span class="alert alert-danger" ng-show="forma_cliente.nombre.$error.required">Nombre requerido!</span>
<span class="alert alert-success" ng-show="forma_cliente.nombre.$valid">El nombre ingresado es corrrecto, asegurate de que los datos del domicilio esten completos</span>

<span class="alert alert-danger" ng-show="forma_cliente.direccion.$error.required">Domicilio requerido!</span>
<span class="alert alert-success" ng-show="forma_cliente.direccion.$valid">El domicilio ingresado es corrrecto, asegurate de que los datos del domicilio esten completos</span>

<span class="alert alert-danger" ng-show="forma_cliente.telefono.$error.pattern">Ejemplo de formato para telefono: 6142770598, 614 277 0598</span>
<span class="alert alert-danger" ng-show="forma_cliente.telefono.$error.required">Numero de telefono requerido!</span>
<span class="alert alert-success" ng-show="forma_cliente.telefono.$valid">El numero de telefono ingresado es corrrecto.</span>
  
<span class="alert alert-danger" ng-show="forma_cliente.email.$error.pattern">Ingresa un E-mail valido por favor.</span>
<span class="alert alert-danger" ng-show="forma_cliente.email.$error.required">Email requerido!</span>
<span class="alert alert-success" ng-show="forma_cliente.email.$valid">El E-mail ingresado es corrrecto.</span>

<span class="alert alert-danger" ng-show="forma_cliente.rfc.$error.pattern">Ingresa un RFC valido por favor.</span>
<span class="alert alert-danger" ng-show="forma_cliente.rfc.$error.required">RFC Requerido!</span>
<span class="alert alert-success" ng-show="forma_cliente.rfc.$valid">El RFC ingresado es corrrecto.</span>
</div>
&nbsp;&nbsp;
<div class="panel-heading"><input type="text" ng-model="searchCliente" class="input-large search-query" placeholder="Buscar Cliente">
</div>      
	<table class="table">
		<thead>
			<tr>
				<th>Nombre</th>
				<th>Direccion</th>
				<th>Telefono</th>
				<th>E-Mail</th>
				<th>RFC</th>
				<th>&nbsp;</th>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat="cliente in efactura | filter:searchCliente">
				<td>{{cliente.nombre | uppercase}}</td>
				<td>{{cliente.direccion}}</td>
				<td>{{cliente.telefono}}</td>
				<td>{{cliente.email}}</td>
				<td>{{cliente.rfc | uppercase}}</td>
				<td><button class="btn btn-danger" ng-click="remover(cliente._id)">Eliminar cliente</button>
				</td>
				<td><button class="btn btn-warning" ng-click="editar(cliente._id)">Editar cliente</button></td>
			</tr>
		</tbody>
	</table>
</div>

<div ng-show="moduloclientes==false;" class="container">
<h1>Modulo de generacion de factura electronica</h1>
<div class="page-header">
  <h2>Mis datos de facturacion</h2> 
  <br>
  <small>Nombre de la empresa</small>
  <br>
  <small>RFC</small>
  <br>
  <small>Direccion</small>
  <br>
  <small>Ciudad/Estado</small>
  <br>
  <small>Codigo Postal</small>
</div>
<h4>Selecciona el cliente a facturar</h4>
<div class="panel-heading"><input type="text" ng-model="searchCliente" class="input-large search-query" placeholder="Buscar Cliente">
</div>
<table class="table">
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Direccion</th>
        <th>Telefono</th>
        <th>E-Mail</th>
        <th>RFC</th>
        <th>&nbsp;</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="cliente in efactura | filter:searchCliente">
        <td>{{cliente.nombre | uppercase}}</td>
        <td>{{cliente.direccion}}</td>
        <td>{{cliente.telefono}}</td>
        <td>{{cliente.email}}</td>
        <td>{{cliente.rfc | uppercase}}</td>
        <td>Seleccionar para facturar: <input type="checkbox"></td>
      </tr>
    </tbody>
  </table>
</br>
	<div class="panel panel-primary">		
<table align="center" class="table table-bordered table-striped table-hover">
    <thead>
      <tr>
      	<th>Accion</th>
        <th>Nombre del producto</th>
        <th>Cantidad</th>
        <th>Valor unitario</th>
        <th>Importe</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="producto in productos">
        <td><button class="btn btn-danger" ng-click="eliminar($index)">Eliminar de la factura</button><br></td>
        <td>{{producto.nombre}}</td>
        <td><input type="number" ng-model="producto.cantidad" ng-change="actualizar_factura($index)"></td>
        <td>$ {{producto.unitario}}</td>
        <td>$ {{producto.importe}}</td>
      </tr>
    </tbody>
  </table>
</div>
<button ng-click="generar()" ng-disabled="productos.length==0||cantidad_total==0" class="btn btn-success">Generar factura electronica</button>
<hr>
<div align="center">
<h2>Subtotal: $<strong>{{subtotal}} Pesos</strong></h2>
<h2>IVA (16%): $<strong>{{iva}} Pesos</strong></h2>
<h1>Total: $<strong>{{total}} Pesos</strong></h1>
</div>
<hr>
<h1 align="center">Ingreso de productos a la factura</h1>
<form ng-submit="add(producto)" align="center" name="forma_producto">

<div class="container">
  <div class="col-md-3"><strong>Nombre del producto: </strong><input type="text" ng-model="producto.nombre" required ng-trim="false">
  </div>
  <div class="col-md-3"><strong>Cantidad: </strong><input type="number" name="cantidad" ng-pattern="regex.cifra" required ng-trim="false" ng-change="cantidad_total=producto.cantidad" ng-model="producto.cantidad">
  </div>
  <div class="col-md-3"><div class="input-group">
    <strong>Precio: </strong><span class="input-group-addon">$</span>
    <input ng-model="producto.unitario" type="number" name="precio" ng-pattern="regex.cifra" required ng-trim="false" class="form-control" aria-label="Amount">
    </div>
  </div>
  <div class="col-md-3"><input type="reset" ng-disabled="!forma_producto.$valid" value="Agregar producto a la factura" class="btn btn-primary">
  </div>
</form>
</div>
</div>
-->
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
	<script src="controllers/controller.js"></script>
</body>
</html>